<!DOCTYPE html>
<html>
  <body>
    <h2>X:yellow Y:green Z:blue</h2>

    <br/>
    <canvas id="myCanvas" height="600" width="600">
    </canvas>

    <br/>
    scale: <input id="scaleSlider" type="range" min="0.2" max="1.4" step="0.01"/>
    speed: <input id="speedSlider" type="range" min="0" max="4" step="0.01"/>
    rotation yz: <input id="xSlider" type="range" min="0" max="360" step="4"/>
    rotation xy: <input id="zSlider" type="range" min="0" max="360" step="4"/>
  </body>
  <head>
    <title>Programming Assignment 2</title>
  </head>
</html>

<script>
var canvas=document.getElementById('myCanvas');
var context=canvas.getContext('2d');
var scaleSlider = document.getElementById("scaleSlider");
scaleSlider.value = 1;
var speedSlider = document.getElementById("speedSlider");
speedSlider.value = 1;
var xSlider=document.getElementById("xSlider");
xSlider.value = 180;
var zSlider=document.getElementById("zSlider");
zSlider.value = 45;

function drawLine(x1,y1,x2,y2,color,width){
  context.beginPath();
  context.lineWidth=width || "1";
  context.strokeStyle=color;
  context.moveTo(x1,y1);
  context.lineTo(x2,y2);
  context.stroke();
};
function Box(speed,color){
  this.size = 400;
  this.color = color || "blue";
  this.angle = 0;
  this.speed = speed || 1;
  this.scale = 1;
  this.rota = Math.PI/4;
};
Box.prototype.draw = function(){
  context.fillStyle=this.color;
  var color = "black";
  context.strokeStyle=color;

  context.beginPath();
  context.moveTo(0,-this.size/2);
  context.lineTo(-(this.size/2)*Math.sin(this.angle),0);
  context.lineTo(0,this.size/2);
  context.lineTo((this.size/2)*Math.sin(this.angle),0);
  context.lineTo(0,-this.size/2)
  context.stroke();
  context.fill();
  context.beginPath();
  context.moveTo(0,-this.size/2);
  context.lineTo(-(this.size/2)*Math.cos(this.angle),0);
  context.lineTo(0,this.size/2);
  context.lineTo((this.size/2)*Math.cos(this.angle),0);
  context.lineTo(0,-this.size/2)
  context.stroke();
  context.fill();
  if(this.angle<=Math.PI/2 || this.angle>=Math.PI*3/2){
    context.beginPath();
    context.moveTo(0,-this.size/2);
    context.lineTo(-(this.size/2)*Math.sin(this.angle),0);
    context.lineTo(0,this.size/2);
    context.stroke();
    context.fill();
  }
  else if(this.angle<=Math.PI*3/2)
  {
    context.beginPath();
    context.moveTo(0,this.size/2);
    context.lineTo((this.size/2)*Math.sin(this.angle),0);
    context.lineTo(0,-this.size/2)
    context.stroke();
    context.fill();
  }

};
Box.prototype.update = function(){
  this.angle = (this.angle + Math.PI * 0.005 * this.speed) % (2*Math.PI);
}
window.onload = function start(){
  var box=new Box(speedSlider.value,"red");
  function draw(){
    canvas.width=canvas.width;
    context.translate(300,300);
    context.rotate(zSlider.value*2*Math.PI/360);
    context.scale(box.scale,box.scale);
    context.fillStyle="blue";
    context.save();
    drawLine(0,400,0,-400,"green","3"); //draw the rotation axis

    if(box.angle<=Math.PI/2){
      drawLine(0,0,-400*Math.cos(box.angle),0,"yellow","3");
      drawLine(0,0,-400*Math.sin(box.angle),0,"blue","3");
      drawLine(400*Math.sin(box.angle),0,0,0,"blue","3");
      drawLine(400*Math.cos(box.angle),0,0,0,"yellow","3");
    }
    else if(box.angle<=Math.PI){
      drawLine(0,0,-400*Math.sin(box.angle),0,"blue","3");
      drawLine(400*Math.cos(box.angle),0,0,0,"yellow","3");
      drawLine(0,0,-400*Math.cos(box.angle),0,"yellow","3");
      drawLine(400*Math.sin(box.angle),0,0,0,"blue","3");
    }
    else if(box.angle<=Math.PI*3/2){
      drawLine(0,0,400*Math.cos(box.angle),0,"yellow","3");
      drawLine(-400*Math.sin(box.angle),0,0,0,"blue","3");
      drawLine(0,0,400*Math.sin(box.angle),0,"blue","3");
      drawLine(-400*Math.cos(box.angle),0,0,0,"yellow","3");
    }
    else{
      drawLine(0,0,400*Math.sin(box.angle),0,"blue","3");
      drawLine(400*Math.cos(box.angle),0,0,0,"yellow","3");
      drawLine(0,0,-400*Math.cos(box.angle),0,"yellow","3");
      drawLine(-400*Math.sin(box.angle),0,0,0,"blue","3");
    }
    box.draw();
    drawLine((box.size-1)/2*Math.cos(box.angle),0,-(box.size-1)/2*Math.cos(box.angle),0,"black");
    drawLine((box.size-1)/2*Math.sin(box.angle),0,-(box.size-1)/2*Math.sin(box.angle),0,"black");
    box.update();
    context.restore();
    window.requestAnimationFrame(draw);
  };
  function updateSpeed(){
    box.speed=speedSlider.value;
  }
  function updateScale(){
    box.scale=scaleSlider.value;
  }
  function updateAngle(){
    box.rota=zSlider.value;
  }
  scaleSlider.addEventListener("input",updateScale);
  speedSlider.addEventListener("input",updateSpeed);
  zSlider.addEventListener("input",updateAngle);
  draw();
}
</script>
